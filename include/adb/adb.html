<ol>
	<li><a href="#introducao">Introdução</a></li>
	<li><a href="#instalacao">Instalação</a></li>
	<li>Configuração no Dispositivo</li>
	<li><a href="#acesso">Acessando device via TERMINAL</a></li>
	<li><a href="#comandos">Comandos</a></li>
	<li><a href="#virtualizacao">Virtualizacao</a></li>
	<li><a href="#erros">Erros</li>
	<li>Fontes</li>
</ol>

<hr>
<a name="introducao"></a>
<h2></h2>
<hr>

<a name="instalacao"></a>

<hr>

<a name="acesso"></a>


<hr>

<a name="comandos"></a>


<h3>ADB SHELL</h3>

<pre class="terminal">$ cd /storage/emulated</pre>
<pre>permission denied</pre>

<h4>Acessando armazenamento dispositivo</h4>

Primeiramente temos que acessar a pasta aonde está localizado o <b>ADB</b>
<pre class="terminal">cd C:\Users\rober\AppData\Local\Android\Sdk\platform-tools
C:\Users\rober\AppData\Local\Android\Sdk\platform-tools&gt; <b style="color: red;">adb shell</b>
cd /storage/emulated/0
</pre>
Listando pastas
<pre class="terminal">$ ls -la</pre>
Retorno 
<pre class="terminal">drwxrwx--x 12 root sdcard_rw 4096 2021-02-25 22:19 .
drwx--x--x  4 root sdcard_rw 4096 2021-03-26 14:29 ..
drwxrwx--x  2 root sdcard_rw 4096 2021-02-25 22:19 Alarms
drwxrwx--x  3 root sdcard_rw 4096 2021-02-25 22:19 Android
drwxrwx--x  2 root sdcard_rw 4096 2021-02-25 22:19 DCIM
drwxrwx--x  2 root sdcard_rw 4096 2021-03-12 16:02 Download
drwxrwx--x  2 root sdcard_rw 4096 2021-02-25 22:19 Movies
drwxrwx--x  2 root sdcard_rw 4096 2021-02-25 22:19 Music
drwxrwx--x  2 root sdcard_rw 4096 2021-02-25 22:19 Notifications
drwxrwx--x  2 root sdcard_rw 4096 2021-02-25 22:19 Pictures
drwxrwx--x  2 root sdcard_rw 4096 2021-02-25 22:19 Podcasts
drwxrwx--x  2 root sdcard_rw 4096 2021-02-25 22:19 Ringtones</pre>

<h4>Acessando pastas dos aplicativos | Acessando packagename | Acessando pacote da aplicacao</h4>
Localizar o adb.exe, no meu caso fica em <code>C:\Users\rober\AppData\Local\Android\Sdk\platform-tools</code>
<pre class="terminal">C:\Users\rober\AppData\Local\Android\Sdk\platform-tools&gt; <b style="color: red;">adb shell</b></pre>

Listando os pacotes/aplicativos disponives no device
<pre class="terminal">$ pm list packages 
// ou procurando pelo nome
$ pm list packages | grep me_poupe</pre>

Retorno da consulta
<pre class="terminal">package:com.example.me_poupe</pre>

Acessando package/pacote da aplicacao.
<pre class="terminal">$ run-as com.example.me_poupe</pre>
Pronto! Agora faça o que quiser !!!
<br clear='all'>

<a href="https://stackoverflow.com/questions/18436110/how-to-access-package-folder-data-pakcage-name-in-android-device" target="_blank">stackoverflow</a>



<h4>Listando pacotes/packages</h4>
<pre class="terminal">$ pm list packages</pre>


<h3>run-as:package not debuggable</h3>
<h4>Listar e localizar o pacote/aplicativo a fazer backup</h4>
<pre class="terminal">adb shell pm list packages -f -3</pre>
<pre class="">
    package:/data/app/org.telegram.messenger-Q4wNXx7ZKlt-EXMkszrViQ==/base.apk=org.telegram.messenger
    package:/data/app/com.google.android.apps.docs.editors.docs-0oZpjQlmySTen1_LqjJIdg==/base.apk=com.google.android.apps.docs.editors.docs
    package:/data/app/com.whatsapp-6miTPJuvCToRHLt5fRoIdQ==/base.apk=com.whatsapp
    package:/data/app/com.alphainventor.filemanager-Vcw96rr4SY1sy0NsXGzR9Q==/base.apk=com.alphainventor.filemanager
    package:/data/app/br.com.cea.appb2c-7zCbhV8g34iucoWyWdtVqQ==/base.apk=br.com.cea.appb2c
    package:/data/app/com.luizalabs.mlapp-nR4k0GQRSIOAtEPi5NVUHQ==/base.apk=com.luizalabs.mlapp
    package:/data/app/us.zoom.videomeetings-NajwtEbOzp4ZxQRigsb--Q==/base.apk=us.zoom.videomeetings
    package:/data/app/br.com.yellow-SWXAGEbi1rkv7-PG4sB6qQ==/base.apk=br.com.yellow
    <span style="color:white;background: red;border:1px solid red">package:/data/app/br.tche.emater.institucional-hnOQungwyD4L_Iba4l5DTg==/base.apk=br.tche.emater.institucional</span>
    package:/data/app/br.tche.emater.expointer-mElNQQeneZUgCh-TYYojvQ==/base.apk=br.tche.emater.expointer
    package:/data/app/com.opera.mini.native-CINzfLziOUsHpr7_nyIs_Q==/base.apk=com.opera.mini.native
    package:/data/app/br.com.zap.imoveis-zbPNpzY7oGJlyLQXLCv1wg==/base.apk=br.com.zap.imoveis
    package:/data/app/com.tozelabs.tvshowtime-9t0JDtMrcE072JdCv_vgOQ==/base.apk=com.tozelabs.tvshowtime
    package:/data/app/com.b2w.submarino--aJ26EG4Zl-S_3Jg0lnHZA==/base.apk=com.b2w.submarino
    package:/data/app/com.taxis99-4ayCliSyD0yzJ6Wc6_eg4Q==/base.apk=com.taxis99
    package:/data/app/br.com.petrobras.br.ma02-uSFvHjh7_SJe3yKIDEGiDA==/base.apk=br.com.petrobras.br.ma02
    package:/data/app/habibs.alphacode.com.br-16Ej1xSTbr6xjlF6CQdYdw==/base.apk=habibs.alphacode.com.br    
</pre>
Em vermelho pacote de nosso interesse.

<h4>Fazer backup do pacote</h4>
<pre class="terminal">
//adb backup -noapk com.app.packagename
adb backup -noapk br.tche.emater.institucional
</pre>
Precisa ser confirmado no dispositivo o backup, pode-se incluir uma senha criptografada.
<div class="centro">
    <img src="images/android-adb-not-debuggable-001.jpg" style="width:40%;border:1px solid black" />
</div>
Concluido o backup você terá um arquivo com a extensão .ab, no nosso exemplo ficou <b>backup.ab</b>

<h4>Transformar o arquivo</h4>
Agora precisamos transformar o arquivo <b>backup.ab</b> num arquivo <b>.tar</b>
<br clear="all">
<br clear="all">
Este é basicamente um arquivo tar desinflado (compactado) em Java. Portanto, para inflar (descompactar) 
algo que seu Mac/linux entenda, você tem duas opções, dependendo da configuração:
<br clear="all">
<br clear="all">
Você pode usar o <code>openssl</code> para extrair o arquivo morto:
<pre class="terminal">dd if=backup.ab bs=24 skip=1|openssl zlib -d > mybackup.tar; tar -xvf mybackup.tar</pre>
Se der erro você pode tentar com python
<pre class="terminal">
dd if=backup.ab bs=1 skip=24 | python -c "import zlib,sys;sys.stdout.write(zlib.decompress(sys.stdin.read()))" | tar -xvf -\n   
</pre>    

Depois de gerado o arquivo pode descompactar com o <b>winrar</b> e está pronto !!!
<br clear="all">
<br clear="all">
Fontes:<br>
<a href="https://android.stackexchange.com/questions/48609/how-can-i-access-the-files-in-data-data-and-copy-them-into-memory-card-withou">android.stackexchange</a> <br>
<a href="https://medium.com/@k1d_bl4ck/how-to-extract-the-database-and-other-things-from-an-enterprise-android-app-2194a52b249b">medium</a> <br>
<hr>
<a href="https://blog.shvetsov.com/2013/02/access-android-app-data-without-root.html">blog.shvetsov</a> <br>
<a href="https://mobizoo.com.br/tutoriais/backup-via-adb/">mobizoo</a><br>
<a href="https://www.systutorials.com/how-to-install-the-zlib-library-in-ubuntu/">zlib</a><br>

<a name="virtualizacao"></a>
<h2>Virtualizacao</h2>

Local padrão no <b>WINDOWS</b> aonde as imagens do sistema ficam baixadas:<br>
<code>C:\Users\<b>YOURUSERNAME</b>\.android\avd</code><br>
<a href="https://stackoverflow.com/questions/2841766/possible-to-change-where-android-virtual-devices-are-saved">stackoverflow</a>

<h3>Abrindo Virtualizacao SEM ANDROID STUDIO</h3>
<kbd>WINDOWS</kbd>
Esse recurso é muito impostante , visto que visa economizar memoria ram, recurso muitoooo importante.<br>
Isso funciona, mas antes as imagens <b style="color:red">TEM DE SER BAIXADAS</b> com o <b>ANDROID STUDIO</b><br>
Primeiramente vamos na pasta aonde está instalado o sdk, caso nao saiba, abra o Android Studio e vá em <code>menu >> tolls >> SDK Manager</code> 
<br><br>
<div class="centro">
    <img src="./images/android-studio-caminho-sdk.jpg" style="width: 50%;">
</div>

No meu caso o caminho do emulator é:<code>C:\Users\49583\AppData\Local\Android\Sdk\<b>emulator</b></code><br><br>
Para listar as imagens utilize o comando:
<pre>.\emulator.exe -list-avds</pre>
no meu caso retornou 3 imagens ...
<pre>4.7_WXGA_API_24
4.7_WXGA_API_25
Pixel_2_API_28</pre>
Para executar basta usar esse comando:
<pre>emulator.exe -avd "4.7_WXGA_API_24"</pre>

<a href="https://windowsloop.com/launch-avd-manager-without-android-studio/" target="_blank">windowsloop</a>



<a name="erros"></a>
<h2>Erros</h2>



<h2>Fontes</h2>
<ul>
	<li><a href="https://pplware.sapo.pt/smartphones-tablets/android/como-usar-o-android-debug-bridge-adb/">pplware.sapo</a></li>
    <li><a href="https://www.androidpit.com.br/adb-drivers-android-windows">androidpit</a></li>
    <li><a href="https://windowsloop.com/launch-avd-manager-without-android-studio/">windowsloop</a>
</ul>

