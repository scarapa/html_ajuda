<h2>Erro de Instalação</h2>

<h3>Erro 001</h3>
Acontece esse erro ao tentar começar a Instalação
<pre class="terminal">$ flutter doctor</pre>
Erro:
<pre class="terminal">\flutter\bin\cache foi inesperado neste momento.</pre>

<code>Solução:</code> ocorre esse porque <b style="color:Red">NÃO É POSSIVEL</b> instalar a pasta <kbd>flutter</kbd> nas pastas abaixo do sistema operacional.
<ul>
    <li>C:\Program Files</li>
    <li>C:\Program Files (x86)</li>
</ul>

<a href="https://stackoverflow.com/questions/49779059/flutter-installation-not-working">stackoverflow</a><br>
<a href="https://www.clubedohardware.com.br/topic/532674-problema-dos-de-foi-inesperado-neste-momento/">clubedohardware</a><br>

<h3>Erro 002</h3>
Dart SDK is not configured
<div class="centro center">
    <img src="images/flutter-erro-instalacao-dart-sdk-001.jpg" style="width:60%" class="bp">
</div>
<br clear="all">
<br clear="all">

<code>SOLUCAO</code>
<div class="centro center">
    <img src="images/flutter-erro-instalacao-dart-sdk-002.jpg" style="width:60%" class="bp">
</div>

<h3>Erro 003</h3>
Ao tentar fazer downgrade do sdk da versão <code>2.12</code> para <code>1.22.0</code> o android studio
não é mais encontrado pelo doctor, mesmo reiniciando e reinstalando o AS.
<pre class="terminal">
Doctor summary (to see all details, run flutter doctor -v):
[✓] Flutter (Channel stable, 1.22.0, on Microsoft Windows [versÃ£o 10.0.19042.867], locale pt-BR)

[✓] Android toolchain - develop for Android devices (Android SDK version 30.0.3)
[!] Android Studio (not installed)
[✓] VS Code (version 1.55.0)
[!] Connected device
    ! No devices available

! Doctor found issues in 2 categories.</pre>
Solucao: Setar manualmente o caminho de instalação do android studio, no meu caso foi esse.
<pre class="terminal">flutter config --android-studio-dir='<b style="color:red">C:\Program Files\Android\Android Studio\</b>'</pre>

<a href="https://github.com/flutter/flutter/issues/67986" target="_blank">github</a>
<hr>

<h2>Bottom overfload</h2>
<div class="centro center">
    <img src="images/flutter-bottom-overfload.jpg" style="width:20%;border:1px solid black">
</div>
<br><br>

Para corrigir tal problema , bastou inserir no body o widget <b>SingleChildScrollView</b>, conforme abaixo
<br><br>
<pre>return Scaffold(
    body: <b>SingleChildScrollView</b>(
        child: Container(
        child: Column(
            //mainAxisSize: MainAxisSize.max,
            children: &lt;Widget&gt;[
            Container(
                child: GridView.builder(
                shrinkWrap: true,
                gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(
                    crossAxisCount:
                        (Orientation == Orientation.portrait) ? 3 : 2),
                itemCount: _thumbs.length,
                itemBuilder: (BuildContext context, int index) {
                    return _thumbCard(context, index);
                },
                ),
            ),
            Container(
                child: Text('teste'),
            )
            ],
        ),
        ),
    ),
);</pre>

<h2>SingleChildScrollView nao funciona scrool da tela</h2>
<pre>
child: Container(
    child: GridView.count(
        crossAxisCount: 3,
        shrinkWrap: true,
        <b style="color:red">scrollDirection: Axis.vertical,
        physics: NeverScrollableScrollPhysics(),</b>
        children: _list.map((p) => ProductManagment(p)).toList(),
    ), 
</pre>
Necessário inserir as duas propriedades em vermelho


<a href="https://stackoverflow.com/questions/53717521/flutter-grid-view-is-not-scrolling">stackoverflow</a>
<a href="https://api.flutter.dev/flutter/widgets/Expanded-class.html">api.flutter</a>

<hr>

Outra alternativa é <b>SEMPRE</b> por na tag <b>BODY</b> o layout <b>LISTVIEW</b>
<pre>
...
body:ListView(
    children: &lt;Widget&gt;[
        //CONTEUDO AQUI DENTRO
    ]
)
... 
</pre>
<hr>
<h2>NAO CONSTROI PROJETO-01</h2>
<pre class="terminal" style="color:red !important">
    FAILURE: Build failed with an exception.

    * Where:
    Settings file 'C:\Users\49583\AndroidStudioProjects\carwashing\android\settings.gradle' line: 11
    
    * What went wrong:
    A problem occurred evaluating settings 'android'.
    > Could not read script 'C:\Users\49583\Flutter\packages\flutter_tools\gradle\app_plugin_loader.gradle' as it does not exist.
    
    * Try:
    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.
    
    * Get more help at https://help.gradle.org
    
    BUILD FAILED in 10s
    Finished with error: Gradle task assembleDebug failed with exit code 1
    
</pre>
Você pode contornar isso regenerando seu android / settings.gradle enquanto estiver no estável (certifique-se de usar o controle de origem!).
<pre class="terminal">
    $ rm android/settings.gradle 
    $ flutter create .
</pre>

<a href="https://github.com/flutter/flutter/issues/55619" target="_blank">github</a>

<hr>

<h2>NAO CONSTROI PROJETO-02</h2>
<pre class="terminal" style="color:red !important">
INSTALL_FAILED_NO_MATCHING_ABIS: Failed to extract native libraries, res=-113]
</pre>
Solucao:
<pre class="terminal">$ flutter clean</pre>



<h2>Dropdown - overflow</h2>

<table>
    <tr>
        <td>
<pre>
List&lt;DropdownMenuItem&lt;Concentrado&gt;&gt; getDropDownConcentradoMenuItems(concentrados) {
    List&lt;DropdownMenuItem&lt;Concentrado&gt;&gt; items = new List();
    for (Concentrado concentrado in concentrados) {
        items.add(
            new DropdownMenuItem(
                value: concentrado,
                child: new Text(concentrado.titulo)
            )
        );
    }
    return items;
}    
</pre>
        </td>
        <td>
            <div class="centro center">
                <img src="images/flutter-dropdown-overflow-01.jpg" style="width:80%" class="bp">
            </div>
        </td>
    </tr>
</table>
<br clear="all">
<code>Solução</code>
<table>
    <tr>
        <td>
<pre>
List&lt;DropdownMenuItem&lt;Concentrado&gt;&gt; getDropDownConcentradoMenuItems(concentrados) {
    List&lt;DropdownMenuItem&lt;Concentrado&gt;&gt; items = new List();
    for (Concentrado concentrado in concentrados) {
        items.add(
            new DropdownMenuItem(
                value: concentrado,
                child: new SizedBox(
                    width: 170,
                    child: new Text(concentrado.titulo)
                )
            )
        );
    }
    return items;
}       
</pre>
        </td>
        <td>
            <div class="centro center">
                <img src="images/flutter-dropdown-overflow-02.jpg" style="width:80%" class="bp">
            </div>            
        </td>
    </tr>
</table>
<a href="https://stackoverflow.com/questions/47032262/flutter-dropdownbutton-overflow">stackoverflow</a><br>

<h2>Erro ao baixar dependencia</h2>
Ao tentar baixar a biblioteca <b>brasil_fields</b> da erro 
<h3>Instalacao</h3>
<pre>dependencies:
    brasil_fields: ^0.4.0</pre>

<pre class="terminal">$ flutter pub get</pre>
<code>ERRO</code>
<pre>The current Dart SDK version is 2.7.0.

Because flutter_mascaras depends on brasil_fields &gt;=0.0.9 which requires SDK version &gt;=2.7.2 &lt;3.0.0, version solving failed.
Running "flutter pub get" in flutter_mascaras...
pub get failed (1; Because flutter_mascaras depends on brasil_fields &gt;=0.0.9 which requires SDK version &gt;=2.7.2 &lt;3.0.0,
version solving failed.) </pre>

Bem como foi dito , a versao DARK é <code>2.7.0</code> e precisa ser no minino a <code>2.7.2</code><br>
<code>Solucao</code> Atualizar o framework com o comando abaixo
<pre class="terminal">$ flutter upgrade</pre>
verificando ...
<pre class="terminal">$ flutter --version</pre>
<pre class="terminal">
Flutter 1.20.4 • channel stable • https://github.com/flutter/flutter.git
Framework • revision fba99f6cf9 (11 days ago) • 2020-09-14 15:32:52 -0700
Engine • revision d1bc06f032
Tools • Dart 2.9.2    
</pre>
<code>OBSERVACAO:</code> o comando <kbd>$ dart --version</kbd> também é util<br>
<pre class="terminal">Dart SDK version: 2.9.2 (stable) (Wed Aug 26 12:44:28 2020 +0200) on "windows_x64"</pre>
<a href="https://stackoverflow.com/questions/59170895/how-to-update-dart-sdk-to-latest-stable-version-in-flutter">stackoverflow</a><br>
<a href="https://pub.dev/packages/brasil_fields">brasil_fields</a>

<h2>Snackbar nao funiona</h2>
<pre class="terminal">The following assertion was thrown while handling a gesture:
Scaffold.of() called with a context that does not contain a Scaffold.
No Scaffold ancestor could be found starting from the context that was passed to Scaffold.of(). This
usually happens when the context provided is from the same StatefulWidget as that whose build
function actually creates the Scaffold widget being sought.
There are several ways to avoid this problem. The simplest is to use a Builder to get a context that
is "under" the Scaffold. For an example of this, please see the documentation for Scaffold.of():</pre>    

Essa exceção ocorre porque você está usando o contexto do widget que instanciou o Scaffold. Não é o contexto de um filho de Scaffold.
<br><br>
<code>Solucao:</code>
Você pode usar uma GlobalKey. A única desvantagem é que usar a GlobalKey pode não ser a maneira mais eficiente de fazer isso.
<br><br>
Uma coisa boa sobre isso é que você também pode passar essa chave para outra classe de widgets customizados que não contenha nenhum scaffold.
<pre>
class HomePage extends StatelessWidget {
    <b style="color:red">final _scaffoldKey = GlobalKey&lt;ScaffoldState&gt;();</b> \\ new line
    @override
    Widget build(BuildContext context) {
        return Scaffold(
        <b style="color:red">key: _scaffoldKey,</b>                           \\ new line
        appBar: AppBar(
            title: Text('SnackBar Playground'),
        ),
        body: Center(
            child: RaisedButton(
            color: Colors.pink,
            textColor: Colors.white,
            onPressed: _displaySnackBar(context),
            child: Text('Display SnackBar'),
            ),
        ),
        );
    }
    _displaySnackBar(BuildContext context) {
        final snackBar = SnackBar(content: Text('Are you talkin\' to me?'));
        <b style="color:red">_scaffoldKey.currentState.showSnackBar(snackBar);</b>   \\ edited line
    }
}    
</pre>

<a href="https://stackoverflow.com/questions/51304568/scaffold-of-called-with-a-context-that-does-not-contain-a-scaffold"></a>

<hr>

<h2>MissingPluginException</h2>

<pre class="terminal" style="color:Red !important">MissingPluginException(No implementation found for method listen on channel plugins.flutter.io/connectivity_status)</pre>

Solucao, comandos abaixo nessa ordem
<pre class="terminal">
$ flutter clean
$ flutter pub get
$ flutter clean
$ flutter run    
</pre>

<a href="https://stackoverflow.com/questions/58080990/no-implementation-found-for-method-getapplicationdocumentsdirectory-on-channel-p">stackoverflow</a>

<h2>Não constroi APK</h2>
<pre>
    1: Task failed with an exception.
    -----------
    * What went wrong:
    Execution failed for task ':app:mergeDebugJavaResource'.
    > A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade
       > File 'com.android.builder.files.ZipCentralDirectory@4c745f95' was deleted, but previous version not found in cache    
</pre>
<code>Solucao</code> deletar a pasta build e rodar comando <code>$ flutter run</code>

<pre>
* What went wrong:
Execution failed for task ':app:mergeDebugNativeLibs'.
> A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade
    > File 'com.android.builder.files.ZipCentralDirectory@5f59aace' was deleted, but previous version not found in cache
</pre>
<code>Solucao</code> baixar a versao do SDK, nesse caso da 29 para 28 , em:<kbd>android\app\build.gradle</kbd>
<pre>
    if (flutterRoot == null) {
        //throw new GradleException("Flutter SDK not found. Define location with flutter.sdk in the local.properties file.")
        // comentado linha acima por conta do metodo GradleException()
        <b style="color:red">throw new Exception("Flutter SDK not found. Define location with flutter.sdk in the local.properties file.")</b>
    }
    ...
    
    android {
        <b style="color:Red">compileSdkVersion 28</b>
    
        sourceSets {
            main.java.srcDirs += 'src/main/kotlin'
        }
    
        lintOptions {
            disable 'InvalidPackage'
        }
    
        defaultConfig {
            // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).
            applicationId "br.tche.emater.produtor"
            minSdkVersion 16
            <b style="color:Red">targetSdkVersion 28</b>
            multiDexEnabled true
            versionCode flutterVersionCode.toInteger()
            versionName flutterVersionName
            testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        }    
</pre>
<a href="https://stackoverflow.com/questions/55343843/flutter-execution-failed-for-task-appprocessdebugresources">stackoverflow</a>

<h2>Checkbox nao funciona</h2>
checkbox não atualiza , nao altera o estado. Para resolver tive que envolver a lista de elementos num StatefulBuilder , conforme esse 
<a href="https://stackoverflow.com/questions/58857826/flutter-checkbox-not-changing-updating-working">link aqui</a>
<pre>
return <b style='color:red'>StatefulBuilder</b>(
    builder: (BuildContext context, StateSetter setState) {
      return Center(
        child: CheckboxListTile(
          title: const Text('Animate Slowly'),
          value: _valueCheck,
          onChanged: (bool value) {
            setState(() {
              _valueCheck = value;
            });
          },
          secondary: const Icon(Icons.hourglass_empty),
        ),
    );
});    
</pre>

<a href="https://stackoverflow.com/questions/58857826/flutter-checkbox-not-changing-updating-working">stackoverflow</a>
<a href="https://stackoverflow.com/questions/51578824/flutter-checkbox-doesnt-work">stackoverflow</a>
<a href="https://medium.com/flutter-comunidade-br/flutter-descomplica-lista-de-checkbox-1e0dca525cb">medium</a>

<h2>AndroidX Flutter</h2>
Solução inserir no arquivo <code>android/gradle.properties</code> duas linhas
<pre>android.useAndroidX=true
android.enableJetifier=true</pre>
<a href="https://www.youtube.com/watch?v=7GTO9D_Anb0">youtube</a>

<h2>Erro compilar</h2>
<pre class="terminal">
PS N:\EMATER\flutter\proposta_app> flutter run
Using hardware rendering with device AOSP on IA Emulator. If you notice
graphics artifacts, consider enabling software rendering with
"--enable-software-rendering".
Launching lib\main.dart on AOSP on IA Emulator in debug mode...
/N:/src/flutter/.pub-cache/hosted/pub.dartlang.org/provider-2.0.1+1/lib/src/provider.dart:179:19: Error: The method 'inheritFromWidgetOfExactType' isn't defined for the class 'BuildContext'.
    - 'BuildContext' is from 'package:flutter/src/widgets/framework.dart' ('/N:/src/flutter/packages/flutter/lib/src/widgets/framework.dart').
Try correcting the name to the name of an existing method, or defining a method named 'inheritFromWidgetOfExactType'.
        ? context.inheritFromWidgetOfExactType(type) as _Provider<T>
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/N:/src/flutter/.pub-cache/hosted/pub.dartlang.org/provider-2.0.1+1/lib/src/provider.dart:180:19: Error: The method 'ancestorInheritedElementForWidgetOfExactType' isn't defined for the class 'BuildContext'.
    - 'BuildContext' is from 'package:flutter/src/widgets/framework.dart' ('/N:/src/flutter/packages/flutter/lib/src/widgets/framework.dart').
Try correcting the name to the name of an existing method, or defining a method named 'ancestorInheritedElementForWidgetOfExactType'.
        : context.ancestorInheritedElementForWidgetOfExactType(type)?.widget
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^


FAILURE: Build failed with an exception.

* Where:
Script 'N:\src\flutter\packages\flutter_tools\gradle\flutter.gradle' line: 991

* What went wrong:
Execution failed for task ':app:compileFlutterBuildDebug'.
> Process 'command 'N:\src\flutter\bin\flutter.bat'' finished with non-zero exit value 1

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.

* Get more help at https://help.gradle.org

BUILD FAILED in 28s
Running Gradle task 'assembleDebug'...
Running Gradle task 'assembleDebug'... Done                        30,1s
Exception: Gradle task assembleDebug failed with exit code 1 
</pre>

Solucao:<br>
Primeiramente atualizar o pacote <b>provider</b> no arquivo <code>pubspec.yaml</code>
<pre>
    provider: ^4.0.0    
</pre>

Segundamente atualizar o arquivo <code>main.dart</code>
Alterando isso:
<pre>    
return StreamProvider&lt;ConnectivityStatus&gt;(
    builder: (context) =&gt; ConnectivityService().connectionStatusController,
...
</pre>

Para isso:
<pre>
return MultiProvider(
    providers: [
        StreamProvider&lt;ConnectivityStatus&gt;(create: (context) =&gt; ConnectivityService().connectionStatusController.stream  )
    ],  
    ...  
</pre>

<a href="https://www.youtube.com/watch?v=s9Mv_8uA7Wo" target="_blank">youtube</a><br>
<a href="https://github.com/Richa0305/flutter_network_layer" target="_blank">github</a><br>
<a href="https://stackoverflow.com/questions/65749767/error-the-method-inheritfromwidgetofexacttype-isnt-defined-for-the-class-bu" target="_blank">stackoverflow</a><br>

<hr>



<h2>Errso json.decoe()</h2>

Ao requisitar uma lista ENORME de clientes , na devolucao dos dados ao executar 
o metodo<code>json.decode(retornoPost.body)</code> acontecia o erro de corromper o JSON:
<pre>var retornoPost = await CallApi().postData(data, _url, 'api/v1/cliente/');
return json.decode(retornoPost.body);</pre>
 
erro abaixo:
<pre class="terminal">FormatException: Unexpected character</pre>

Depois de muita analise , foi contornado o erro ajustando no <code>LARAVEL</code>, a forma que
era enviado os dados.<br><br>

Original:
<pre>...
header('Access-Control-Allow-Origin: *');
header('Content-Type: application/json');
echo json_encode($retorno);    
</pre>

Corrigido:
<pre>...
return response()->json(
    $retorno, 200, ['Content-Type' => 'application/json;charset=UTF-8', 'Charset' => 'utf-8'],
    JSON_UNESCAPED_UNICODE
);</pre>

<code>SOLUCAO</code>
<pre>return json.decode(json.encode(retornoPost.body));</pre>
<a href="https://github.com/flutter/flutter/issues/32841">github.com</a><br><br>
<a href="https://stackoverflow.com/questions/55671441/flutter-formatexception-unexpected-character-at-character-1" target="_blank">stackoverflow</a>